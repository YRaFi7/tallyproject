{% extends 'base.html' %}
    {% block body %}
        {% load static %}
        <style>
            
            .form-popup {
                visibility: hidden;       
                position: fixed;
                top: 230px;
                right: 27px;
                background-color: rgb(216, 232, 238); 
                border: 1px solid #f1f1f1;
                z-index: 9;
                width: 300px;
                height: 200px;
            }
        </style>
        

            <div style="width: 190%;margin-left: 2%;margin-top: 15%;">
                <div class="row container-fluid p-0 " >

                    <div class="col-sm-6 m-0 p-0" style=" background-color:rgba(0,0,0,0.2);">
                    <h6  class="bg-info text-light p-2">Stock Item Allocation</h6>

                    <form id="" action="stock_item_allocations" method="post" class="p-5">
                        {% csrf_token %}
                



                    <div class="row container-fluid  p-2 m-0">
                        <div class="col-sm-4 m-0 p-0"> <label for="allocate">Allocations of :</label></div>
                        <div class="col-sm-8 m-0 p-0"><input class="custom-select-md form-control" type="text" name="allocate"
                            style="width: 30%;margin-left: -20%;" id="loc" 
                            placeholder="" autocomplete="off"/></div> 
                    </div>

                    <div class="row container-fluid  p-2 m-0">
                        <div class="col-sm-4 m-0 p-0"> <label for="for">for :</label></div>
                        <div class="col-sm-8 m-0 p-0"><input class="custom-select-md form-control" type="text" name="for_allocate"
                            style="width: 30%;margin-left: -20%;" id="for" 
                            placeholder="" autocomplete="off"></div> 
                    </div>
  
                                <Table class="w-100 table text-center" border="1">
                                    <thead>
                                        <tr>
                                            <th style="width: 50px;" rowspan="2">Godown</th>
                                            <th width="30px" rowspan="2">Quantity</th>
                                            <th rowspan="2">Rate</th>
                                            <th rowspan="2">Per</th>
                                            <th rowspan="2">Amount</th>
                                        </tr>
                                    </thead>

                                    <tbody>                   
                                        <tr>
                                       
                                            <td width="100"><input class="custom-select-md form-control" type="text" name="godown"
                                                 id="primary-text" onfocus="showList()"
                                                placeholder="Primary" autocomplete="off"> </td>
                                            <td><input class="custom-select-md form-control" type="number" id="quantity" name="quantity"
                                                id="" 
                                               placeholder="" autocomplete="off"/> </td>
                                            <td width="50"><input class="custom-select-md form-control" type="number" id="rate" name="rate"
                                                id="" 
                                               placeholder="" autocomplete="off"/> </td>
                                            <td width="50"> <input class="custom-select-md form-control" type="number" id="per" name="per"
                                                id="" 
                                               placeholder="" autocomplete="off"/></td>
                                            <td width="50"> <input class="custom-select-md form-control" type="number" id="amount" name="amount"
                                               placeholder="" autocomplete="off"/></td>
                                        </tr>
                                    </tbody>

                                    
                                    
                                </Table>
                                <div class="enter w-100 py-4"><button class="btn btn-info w-15" onclick="checker()" >CREATE</button></div>     


                            </form>
                            
                    </div>
                </div>
            </div>


<!-- list Creation -->

<div class="form-popup" id="list-div" >
  
    <h6 style="background-color:rgb(17, 169, 240) ;color:white">List of Godowns</h6>
<hr >
<div>
    <table >
    <tr >
        <td>
             <a href="godown_secondary"> <button
                type="submit"
                style="color: black;margin-left: 310%; width: 20%"
                class="custom-select-md form-control"
              >
                create
              </button></a>
        </td>
    </tr>

    <tr>
      <td>    

        {% for l in gd %}
        <div onclick="hideList('{{l.name}}')" style="color: black;" >{{l.name}}</div>
        {% endfor %}
      </td>
    </tr>  
    
    </table>
</div>

 </div>




    <script>
        document.getElementById("loc").value = localStorage.getItem("name");

        document.getElementById("for").value = localStorage.getItem("units");

        document.getElementById("per").value = localStorage.getItem("units");
       



        function checker(){
            var result =confirm('Are you sure?');
            if (result==false){
                event.preventDefault();
            }
        }
      

        
        function showList() {
            document.getElementById("list-div").style.visibility = "visible";
        }
        function hideList(valueDIv) {
            document.getElementById("primary-text").value=valueDIv;
            document.getElementById("list-div").style.visibility = "hidden";
        }

        $('#quantity, #rate').on('input',function(){
            var quantity = parseFloat($('#quantity').val()) || 0;
            var rate = parseFloat($('#rate').val()) || 0;

            $('#amount').val(quantity * rate);    
        });
        
       
        
        

    </script>
            
       
      
        
       
    
{% endblock %}